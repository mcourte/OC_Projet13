
<!DOCTYPE html>


<html lang="fr" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Déploiement &#8212; Documentation OC-Lettings-Site 1</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=3ecc6c97"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/translations.js?v=041d0952"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'deploiement';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="prev" title="Docker" href="docker.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="fr"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Passer au contenu principal</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Haut de page</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Documentation OC-Lettings-Site 1</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Recherche</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Sommaire</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Déploiement</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Téléchargez cette page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/deploiement.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Télécharger le fichier source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimer au format PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Mode plein écran"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="clair/sombre" aria-label="clair/sombre" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Déploiement</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenu </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#qu-est-ce-que-le-deploiement-et-circleci">Qu’est-ce que le déploiement et CircleCI ?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#avantages-de-l-integration-continue-avec-circleci">Avantages de l’intégration continue avec CircleCI :</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processus-de-deploiement-avec-circleci">Processus de déploiement avec CircleCI :</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequis">1. Prérequis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#principe">2. Principe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-de-circleci">3. Configuration de CircleCI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-de-render">8. Configuration de Render</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="deploiement">
<h1>Déploiement<a class="headerlink" href="#deploiement" title="Lien vers cette rubrique">#</a></h1>
<section id="qu-est-ce-que-le-deploiement-et-circleci">
<h2>Qu’est-ce que le déploiement et CircleCI ?<a class="headerlink" href="#qu-est-ce-que-le-deploiement-et-circleci" title="Lien vers cette rubrique">#</a></h2>
<p>Le déploiement est le processus par lequel une application est mise en production, rendant son utilisation possible pour les utilisateurs finaux. CircleCI est un service d’intégration et de déploiement continus (CI/CD) qui automatise les processus de test et de déploiement d’applications. Il permet de s’assurer que le code est de haute qualité avant d’être déployé en production.</p>
</section>
<section id="avantages-de-l-integration-continue-avec-circleci">
<h2>Avantages de l’intégration continue avec CircleCI :<a class="headerlink" href="#avantages-de-l-integration-continue-avec-circleci" title="Lien vers cette rubrique">#</a></h2>
<ul class="simple">
<li><p><strong>Automatisation</strong> : CircleCI automatise le processus de test et de déploiement, réduisant ainsi le risque d’erreurs humaines.</p></li>
<li><p><strong>Rapidité</strong> : Les modifications apportées au code sont testées et déployées rapidement, ce qui permet une mise à jour continue des fonctionnalités et des corrections de bugs.</p></li>
<li><p><strong>Qualité du code</strong> : CircleCI exécute des tests automatisés et des analyses de linting, garantissant que seul le code de qualité est déployé.</p></li>
</ul>
</section>
<section id="processus-de-deploiement-avec-circleci">
<h2>Processus de déploiement avec CircleCI :<a class="headerlink" href="#processus-de-deploiement-avec-circleci" title="Lien vers cette rubrique">#</a></h2>
<ol class="arabic simple">
<li><p><strong>Configuration du projet</strong> : Après avoir cloné le projet et configuré un environnement virtuel, créez un nouveau projet sur CircleCI lié à votre dépôt GitHub.</p></li>
<li><p><strong>Définition des variables d’environnement</strong> : Configurez des variables d’environnement nécessaires à l’application dans CircleCI, telles que ALLOWED_HOSTS, DEBUG, DOCKERHUB_PASSWORD, et autres clés secrètes.</p></li>
<li><p><strong>Pipeline automatisé</strong> : Lorsque des mises à jour sont poussées sur la branche master, CircleCI déclenche automatiquement le pipeline qui exécute les tests et le linting du code.</p></li>
<li><p><strong>Construction et déploiement</strong> : Si les tests réussissent, CircleCI construit une image Docker et la pousse sur DockerHub. Ensuite, il déploie l’application sur Render.</p></li>
<li><p><strong>Surveillance et alertes</strong> : CircleCI peut être intégré avec des outils comme Sentry pour surveiller les erreurs et recevoir des alertes en temps réel.</p></li>
</ol>
<p>Le déploiement automatisé avec CircleCI permet d’améliorer l’efficacité, la rapidité et la qualité des mises à jour de l’application. En intégrant des tests automatisés et des vérifications de code, il contribue à maintenir une base de code robuste et fiable, tout en assurant une expérience utilisateur fluide et sans interruption.</p>
</section>
<section id="prerequis">
<h2>1. Prérequis<a class="headerlink" href="#prerequis" title="Lien vers cette rubrique">#</a></h2>
<p>Pour effectuer le déploiement et l’intégration continue de l’application, les comptes suivants sont nécessaires :</p>
<ul class="simple">
<li><p>Compte GitHub</p></li>
<li><p>Compte CircleCI (lié au compte GitHub)</p></li>
<li><p>Compte Docker</p></li>
<li><p>Compte Render</p></li>
<li><p>Compte Sentry</p></li>
</ul>
</section>
<section id="principe">
<h2>2. Principe<a class="headerlink" href="#principe" title="Lien vers cette rubrique">#</a></h2>
<p>Le déploiement de l’application est automatisé par le pipeline CircleCI. Lorsque des mises à jour sont poussées sur le dépôt GitHub, le pipeline déclenche l’exécution de la suite de tests et le linting du code pour toutes les branches du projet. Si des mises à jour sont effectuées sur la branche main, et uniquement si les tests et le linting réussissent.</p>
<p>Workflow :
- Construit une image Docker et la pousse sur DockerHub.
- Si l’étape précédente réussit, déploie l’application sur Render.</p>
</section>
<section id="configuration-de-circleci">
<h2>3. Configuration de CircleCI<a class="headerlink" href="#configuration-de-circleci" title="Lien vers cette rubrique">#</a></h2>
<ol class="arabic simple">
<li><p>Après avoir cloné le projet, configuré l’environnement virtuel local (voir section Développement local) et créé les comptes nécessaires, suivez ces étapes pour configurer un nouveau projet sur CircleCI :</p></li>
<li><p>Connectez-vous à votre compte CircleCI.</p></li>
<li><p>Allez sur « Projects » et sélectionnez « Set Up Project » pour le projet cloné depuis GitHub.</p></li>
<li><p>Choisissez la branche main comme source pour le fichier .circleci/config.yml.</p></li>
<li><p>Pour que le pipeline CircleCI fonctionne correctement, configurez les variables d’environnement suivantes (Paramètres du projet &gt; Variables d’environnement) :</p>
<ul class="simple">
<li><p><strong>ALLOWED_HOSTS</strong> : Spécifiez les hôtes autorisés pour l’application (par exemple, localhost, your-domain.com).</p></li>
<li><p><strong>DEBUG</strong> : Choisissez True (en local) ou False (en production).</p></li>
<li><p><strong>DOCKERHUB_PASSWORD</strong> : Mot de passe du compte Docker.</p></li>
<li><p><strong>DOCKERHUB_USERNAME</strong> : Nom d’utilisateur du compte Docker.</p></li>
<li><p><strong>HOOK_RENDER</strong> : URL de l’API Render pour le déploiement automatique.</p></li>
<li><p><strong>SECRET_KEY</strong> : Clé secrète de l’application Django (générée lors de la création du projet Django).</p></li>
<li><p><strong>SENTRY_DSN</strong> : URL du projet Sentry pour le suivi des erreurs.</p></li>
</ul>
</li>
<li><p>Ajout de tests et étapes supplémentaires : Vous pouvez personnaliser davantage le pipeline CircleCI en ajoutant des étapes de tests automatisés pour garantir la qualité du code avant le déploiement. Par exemple, vous pouvez ajouter des étapes pour :
- Exécuter des tests unitaires avec pytest ou unittest.
- Vérifier la qualité du code avec des outils comme flake8 pour le linting Python.
- Mettre en cache les dépendances pour réduire le temps d’exécution.</p></li>
<li><p>Gestion des erreurs : Utilisez des outils tels que Sentry pour capturer les erreurs en temps réel dans l’application, et CircleCI peut intégrer ces alertes dans le pipeline.</p></li>
</ol>
</section>
<section id="configuration-de-render">
<h2>8. Configuration de Render<a class="headerlink" href="#configuration-de-render" title="Lien vers cette rubrique">#</a></h2>
<ol class="arabic simple">
<li><p>Connectez-vous à votre compte Render.</p></li>
<li><p>Créez un Web Service pour l’application en spécifiant le dépôt GitHub où le code est hébergé.</p></li>
<li><p>Dans l’interface de Render, définissez les variables d’environnement requises pour votre application dans la section des paramètres du service Web :</p>
<ul class="simple">
<li><p><strong>ALLOWED_HOSTS</strong> : Saisissez les hôtes autorisés (comme your-domain.com ou localhost).</p></li>
<li><p><strong>DEBUG</strong> : Choisissez True pour activer le mode debug ou False pour la production.</p></li>
<li><p><strong>DOCKERHUB_PASSWORD</strong> : Mot de passe du compte Docker.</p></li>
<li><p><strong>DOCKERHUB_USERNAME</strong> : Nom d’utilisateur du compte Docker.</p></li>
<li><p><strong>SECRET_KEY</strong> : Clé secrète de Django pour votre application.</p></li>
<li><p><strong>SENTRY_DSN</strong> : URL du projet Sentry pour le suivi des erreurs.</p></li>
</ul>
</li>
<li><p>Hooks de déploiement : Configurez un webhook dans Render pour que CircleCI puisse déclencher automatiquement le déploiement une fois l’image Docker mise à jour sur DockerHub. Cela assure une continuité de l’intégration/déploiement en cas de succès des tests sur CircleCI.</p></li>
</ol>
<p>Surveillance et logs : Render offre également des options pour surveiller votre application déployée, accéder aux logs, et vérifier la santé du service en continu.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="docker.html"
       title="page précédente">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">précédent</p>
        <p class="prev-next-title">Docker</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenu
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#qu-est-ce-que-le-deploiement-et-circleci">Qu’est-ce que le déploiement et CircleCI ?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#avantages-de-l-integration-continue-avec-circleci">Avantages de l’intégration continue avec CircleCI :</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processus-de-deploiement-avec-circleci">Processus de déploiement avec CircleCI :</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequis">1. Prérequis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#principe">2. Principe</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-de-circleci">3. Configuration de CircleCI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configuration-de-render">8. Configuration de Render</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Par Magali Courté
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Magali Courté.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>